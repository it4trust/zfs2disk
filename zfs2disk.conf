# zfs2disk.conf
# Konfigurationsdatei für das zfs2disk Skript
# Diese Datei muss im gleichen Verzeichnis wie zfs2disk.sh liegen

# Logdatei (empfohlen wird die externe Logrotation per logrotate)
LOGFILE="/var/log/zfs2disk.log"

# Statusdatei für Checkmk-Plugin (enthält letzte Erfolgsmeldung und Fehler)
STATUSFILE="/var/log/zfs2disk_status"

# Array mit Seriennummern der externen Platten (eindeutige Identifier, bitte anpassen)
EXTERNAL_SERIALS=("usb-TOSHIBA_EXTERNAL_USB_20231121000271F-0:0" "usb-TOSHIBA_EXTERNAL_USB_20231120010439F-0:0")

# Quell-Datasets (auf rpool), alle zu sichernden Pfade – hier auch rpool/examionbkp
SOURCE_DATASETS=("rpool/pveconf" "rpool/data" "rpool/ROOT")

# Ziel-Namen für Datasets im neuen Pool (backuppool) – Reihenfolge muss übereinstimmen
TARGET_NAMES=("pveconf" "data" "ROOT")

# Suffix für zu erstellende Snapshots (Datum und Uhrzeit) – alle Backup-Snapshots beginnen mit "backup-"
SNAP_SUFFIX="backup-$(date +'%Y-%m-%d_%H%M')"

# Array der Maschinen-IDs, die heruntergefahren und wieder gestartet werden sollen.
# Hier können sowohl QEMU-VMs als auch LXC-Container enthalten sein.
VM_IDS=(100 101 102 104)

# Externer Poolname (wird bei jedem Backup neu erstellt; nur dieser Pool wird manipuliert)
POOL_NAME="backuppool"

# Maximale Wartezeit nach kritischen Schritten (in Sekunden)
WAIT_AFTER_CRITICAL=120

# Anzahl der Wiederholungen beim Überprüfen von Maschinenzuständen (10 Sekunden pro Versuch)
VM_CHECK_RETRIES=12
